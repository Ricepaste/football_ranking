[![GitHub license](https://img.shields.io/badge/License-MIT-yellow.svg)](https://github.com/Ricepaste/football_ranking/blob/master/LICENSE)
# Football Ranking by Various Statistical Models

## Description

This repository contains tools and scripts for generating and analyzing football rankings using various statistical models and methods. It includes data collection, preprocessing, model implementation, and result analysis.

## Installation

1. **Clone the repository:**
    
    ```bash
    git clone https://github.com/yourusername/footballRanking.git
    cd footballRanking
    ```
    
2. **Create and activate a virtual environment:**
    
    ```bash
    python3 -m venv env
    source env/bin/activate  # On Windows, use `env\Scripts\activate`
    ```
    
3. **Install dependencies:**
    
    ```bash
    pip install -r requirements.txt
    ```
    

## Usage

### Data Collection

The `spider` directory contains scripts for collecting ranking data:

- `NCAA_record.py` and `spider.py` for scraping NCAA records.

To run the spider, execute:

```bash
python spider/NCAA_record.py
```

### Data Processing

- `Thurstone_Generate_pair_comparison_data.py` for generating pairwise comparison data which will be used in the Thurstone model later.

To process data, execute:

```bash
python main/Thurstone_Generate_pair_comparison_data.py
```

The generated pairwise data should be saved to:

```bash
Mplus/MET_Maydeu-Olivares_web/test.dat

```

### Statistical Models

The `main` directory includes implementations of various ranking models:

- `Bradley_Terry.py` for the Bradley-Terry model.
- `Elo.py` for the Elo rating system.
- `random_walk_matrix.py` for random walk-based ranking.

To run a model, execute (example for Bradley-Terry model):

```bash
python main/Bradley_Terry.py
```

### Analysis with Mplus

After generating pairwise comparison data using `Thurstone_Generate_pair_comparison_data.py`, you need to prepare the Mplus input file:

- `gener_Mplus_code.py` in `Mplus/MET_Maydeu-Olivares_web/` will generate the necessary Mplus input code for the Thurstone-Takane unrestricted model.

To generate the Mplus code, specify the number of latent variables (teams) and execute:

```bash
python Mplus/MET_Maydeu-Olivares_web/gener_Mplus_code.py
```

The generated Mplus code will be saved in `results.txt`. You need to:

1. Copy the content of `results.txt`.
2. Paste it into an Mplus Diagrammar input file (typically with a `.inp` extension).
3. Run the analysis in Mplus.
4. Review the analysis results in the output file generated by Mplus.

### Correlation Calculation

The `main` directory also includes a script for calculating the correlation between different ranking methods:

- `Correlation_Cauculation.py` for calculating and comparing the correlation of ranking results from different models.

To calculate correlations, execute:
```bash
python main/Correlation_Cauculation.py
```

## Project Structure

```css!
footballRanking/
├── .gitignore
├── .vscode/
│   ├── launch.json
│   └── settings.json
├── form_rank/
│   ├── Football_Ranking.csv
│   ├── pair.csv
│   └── rank_to_pair.py
├── main/
│   ├── Animation.ipynb
│   ├── Bradley_Terry.py
│   ├── Correlation_Cauculation.py
│   ├── Elo.py
│   ├── random_walk_matrix.py
│   ├── Thurstone_Generate_pair2pair_data.py
│   ├── ...
├── Mplus/
│   ├── MET_Maydeu-Olivares_web/
│   └── ...
├── spider/
│   ├── msedgedriver.exe
│   ├── NCAA_record.py
│   ├── spider.py
│   ├── rank_data/
│   └── thurstone/
└── README.md

```

## Contact Information

If you have any questions or feedback, please reach out to:

- **Name:** Chia-Jung, Kuo
- **Email:** n22126@gmail.com
- **GitHub:** [Ricepaste](https://github.com/Ricepaste)

- **Name:** Ming-Yu, Shieh
- **Email:** parisdata@gmail.com
- **GitHub:** [BangDonKiller](https://github.com/BangDonKiller)